<div class="flex flex-col h-full overflow-auto">
    <h1 class="text-2xl text-center">{{title}}</h1>

    <div class="flex justify-end gap-4 mb-4">
        <button (click)="refresh()" class="inline-flex items-center justify-center gap-2 
         px-3 py-2 
         bg-blue-500 text-white font-medium rounded-lg 
         hover:bg-blue-600 
         focus:outline-none active:bg-blue-700 
         disabled:bg-slate-300 disabled:text-slate-500 
         disabled:cursor-not-allowed disabled:hover:bg-slate-300 
         transition-colors">
             <svg 
                class="w-4 h-4" 
                fill="none" 
                stroke="currentColor" 
                viewBox="0 0 24 24"
            >
                <path 
                stroke-linecap="round" 
                stroke-linejoin="round" 
                stroke-width="2" 
                d="M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0 3.181 3.183a8.25 8.25 0 0 0 13.803-3.7M4.031 9.865a8.25 8.25 0 0 1 13.803-3.7l3.181 3.182m0-4.991v4.99" />
                />
            </svg>
        </button>
        <input class="px-2 py-1 border border-slate-300 rounded-lg" [formControl]="searchControll" type="text" placeholder="Поиск...">
    </div>
    <div class="flex-1 min-h-0 overflow-auto">
        <ng-container *ngIf="loading$ | async">
            <p class="text-2xl text-center">Загрузка сотрудников...</p>
        </ng-container>

        <ng-container *ngIf="(error$ | async) as err">
            <p class="text-2xl text-center">{{err}}</p>
        </ng-container>

        <div *ngIf="(employee$ | async) as employees" class="flex-1 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-6">
            <div *ngFor="let employee of employees; let i = index">
                <app-employee-card
                    [firstName]="employee.firstName"
                    [lastName]="employee.lastName"
                    (remove)="remove(employee.id)"
                ></app-employee-card>
            </div>
        </div>
        <ng-container *ngIf="(employee$ | async) as employees">
            <p class="text-2xl text-center" *ngIf="employees.length === 0 && !(error$ | async)">Список сотрудников пуст</p>
        </ng-container>
        
    </div>

    <div class="h-[20%]">
        <form class=" flex flex-col gap-2" [formGroup]="form" (ngSubmit)="addEmployee()">
            <input class="px-2 py-1 border border-slate-300 rounded-lg" formControlName="firstName" type="text" placeholder="Имя">
                <div *ngIf="form.controls.firstName.touched && form.controls.firstName.invalid">
                    <small class="error" *ngIf="form.controls.firstName.errors?.['required']">Поле обязательно</small>
                    <small class="error" *ngIf="form.controls.firstName.errors?.['minlength']">Минимальное значение 3</small>
                </div>
            <input class="px-2 py-1 border border-slate-300 rounded-lg" formControlName="lastName" type="text" placeholder="Фамилия">
            <div *ngIf="form.controls.lastName.touched && form.controls.lastName.invalid">
                <small class="error" *ngIf="form.controls.lastName.errors?.['required']">Поле обязательно</small>
            </div>
            <button 
                class="px-3 py-1.5 text-sm font-medium text-blue-600 
                bg-blue-100 rounded-md hover:bg-blue-200 transition-colors
                disabled:bg-slate-300 disabled:text-slate-500 
                disabled:cursor-not-allowed disabled:hover:bg-slate-300" 
                [disabled]="form.invalid" type="submit">Добавить нового сотрудника
            </button>
        </form>
    </div>
</div>